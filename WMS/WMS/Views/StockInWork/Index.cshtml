<script type="text/javascript">
    var rowindex = -1;
    $(function () {
        $('#details').datagrid('options').onClickRow = function () {
            $('#SubDetails').datagrid('loadData', { total: 0, rows: [] });
            var row = $('#details').datagrid('getSelected');
            if (row) {
                //alert(row.BILL_NO);
                $('#SubDetails').datagrid('loadData', { total: 0, rows: [] });
                $('#SubDetails').datagrid({ url: '/StockInWork/GetSubdetail/?page=1&rows=1000&billno=' + encodeURIComponent(row.BILL_NO) });
                //                $('#SubDetails').datagrid('reload');
            }
            else {
                $.messager.show({ title: '系统提示', msg: '失败!请检查原因！' });
            }
            //            setdatagridcell();
        }
        $('#details').datagrid('options').onLoadSuccess = function () {
            $('#details').datagrid('selectRow', rowindex);
        }
    });
</script>

@*入库作业*@
<div region="center" split="true" border="false">    
    <table id="details" class="easyui-datagrid" url="/StockInBill/Details/?flag=1" border="false" singleSelect="true"
        fit="true" fitColumns="false" toolbar="#tool"  pagination="true" rownumbers="true" striped="true">
        <thead>
            <tr>
                <th field="BILL_NO" width="120">单据编号</th>
                <th field="BILL_DATE" width="80">入库日期</th>
                <th field="BTYPE_NAME" width="80">单据类型</th>
                <th field="BTYPE_CODE" width="80" hidden="true">单据类型代码</th>
                <th field="BILL_METHOD" width="90" hidden="true">入库方式代码</th>
                <th field="BILLMETHODNAME" width="90">入库方式</th>
                <th field="SCHEDULE_NO" width="80" hidden="true">计划单号</th>
                <th field="WAREHOUSE_CODE" width="80">仓库编号</th>
                <th field="WAREHOUSE_NAME" width="80">仓库名称</th>
                <th field="TARGET_CODE" width="80" hidden="true">目标位置</th>
                <th field="STATUS" width="80" hidden="true">单据来源</th>
                <th field="STATUSNAME" width="80">单据来源</th>
                <th field="STATE" width="60" hidden="true">单据状态</th>
                <th field="STATENAME" width="60">单据状态</th>
                <th field="SOURCE_BILLNO" width="150">来源单号</th>
                <th field="LINE_NO" width="90" hidden="true">制丝线编号</th>
                <th field="CIGARETTE_CODE" width="90" hidden="true">牌号代码</th>
                <th field="CIGARETTE_NAME" width="110" >牌号</th>
                <th field="FORMULA_CODE" width="90"  hidden="true">配方代号</th>
                <th field="FORMULA_NAME" width="90"  >配方名称</th>
                <th field="BATCH_WEIGHT" width="90">批次重量</th>
                <th field="OPERATER" width="90">操作人</th>
                <th field="OPERATE_DATE" width="110">操作日期</th>
                <th field="CHECKER" width="60">审核人员</th>
                <th field="CHECK_DATE" width="110">审核日期</th>
                <th field="TASKER" width="90">作业人员</th>
                <th field="TASK_DATE" width="110">作业日期</th>
                <th field="SCHEDULE_ITEMNO" width="90" hidden="true">计划单序号</th>
            </tr>
        </thead>
    </table>
</div>

<div region="south" split="true" border="false" style="height: 250px; border-top-style: solid; border-top-width: 1px; border-top-color: 99BBE8;">
    <table class="easyui-datagrid" border="false" singleSelect="false" id="SubDetails" url="" 
        fit="true" fitColumns="false" toolbar="#tool"  pagination="false" rownumbers="true" striped="true">
        <thead>
            <tr>
                <th  checkbox="true">选择</th>
                <th field="BILL_NO" width="100" hidden="true">单据编号</th>
                <th field="ITEM_NO" width="40" hidden="true">序号</th>
                <th field="PRODUCT_CODE" width="150">产品代码</th>
                <th field="YEARS" width="80" >年份</th>
                <th field="GRADE_NAME" width="90" >等级</th>
                <th field="ORIGINAL_NAME" width="120" >原产地</th>
                <th field="BARCODEID" width="100">条码标识符</th>
                <th field="PRODUCT_BARCODE" width="100">产品条码</th>
                <th field="WEIGHT" width="100" >标准重量</th>
                <th field="REAL_WEIGHT" width="100" >实际重量</th>
                <th field="PACKAGE_COUNT" width="100">包数</th>
                <th field="OUT_BILLNO" width="100" hidden="true">出库单号</th>
                <th field="CELL_CODE" width="100">货位</th>
                <th field="NEWCELL_CODE" width="80"  hidden="true">新的货位</th>
                <th field="PALLET_CODE" width="100">托盘条码</th>
                <th field="IS_MIX" width="60" hidden="true">是否混装</th>
                <th field="IS_MIXDESC" width="100">是否混装</th>
            </tr>
        </thead>
    </table>
</div>


